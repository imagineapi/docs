import { Callout, Tab, Tabs, Steps } from 'nextra/components'

# ä½¿ç”¨æˆ‘ä»¬çš„ Midjourney API å¿«é€Ÿå…¥é—¨

## æ¦‚è¿°

è¿™ç¯‡æŒ‡å—å‡è®¾æ‚¨æ­£åœ¨ä½¿ç”¨ä¸€ä¸ª[æ¼”ç¤ºè´¦æˆ·](https://www.imagineapi.dev/pricing)ã€‚æˆ‘ä»¬å°†é€šè¿‡ç”Ÿæˆä¸€å¼ å›¾ç‰‡å¹¶æŸ¥çœ‹ç»“æœæ¥å¿«é€Ÿå¼€å§‹ã€‚æ‚¨ä¹Ÿå¯ä»¥é€‰æ‹©æ‚¨ä½¿ç”¨çš„è¯­è¨€ã€‚

æœ€å¥½çš„éƒ¨åˆ†æ˜¯ï¼Œæ‚¨å¯ä»¥ç«‹å³å¤åˆ¶å¹¶ä½¿ç”¨è¿™æ®µä»£ç ï¼

<Callout type="info" emoji="ğŸš€">
**é€šè¿‡è·å–ä¸€ä¸ª [æ¼”ç¤ºè´¦æˆ·](https://www.imagineapi.dev/pricing)ï¼Œç”Ÿæˆ Midjourney å›¾ç‰‡çš„æœ€ç®€å•æ–¹å¼ã€‚**
</Callout>

<Steps>

### è·å–èº«ä»½éªŒè¯ä»¤ç‰Œ

![ç”Ÿæˆèº«ä»½éªŒè¯ä»¤ç‰Œçš„æ­¥éª¤åŠ¨ç”»](/authentication.gif)

 1. ä¸€æ—¦æ‚¨è´­ä¹°äº†ä¸€ä¸ª[æ¼”ç¤ºè´¦æˆ·](https://www.imagineapi.dev/pricing)ï¼Œæ‚¨å°†æ”¶åˆ°ä¸€å°åŒ…å«ç”¨æˆ·åå’Œå¯†ç çš„ç”µå­é‚®ä»¶ã€‚ä½¿ç”¨è¿™äº›ä¿¡æ¯ç™»å½•åˆ°æˆ‘ä»¬çš„æ¼”ç¤ºæœåŠ¡å™¨ï¼š[https://demo.imagineapi.dev](https://demo.imagineapi.dev)ã€‚
 1. ç™»å½•åï¼Œç‚¹å‡»å·¦ä¸‹è§’çš„ `ç”¨æˆ·å›¾æ ‡`ï¼š![](/authentication-token.png)
 1. è¿™äº›æ˜¯æ‚¨çš„ç”¨æˆ·è®¾ç½®ã€‚æ»šåŠ¨åˆ°åº•éƒ¨ï¼Œæ‰¾åˆ° `ä»¤ç‰Œ` å­—æ®µå¹¶ `ç‚¹å‡»åœ†å½¢ç®­å¤´æŒ‰é’®` ä»¥é‡æ–°ç”Ÿæˆä»¤ç‰Œï¼š![](/authentication-click-regenerate.png)
 1. è¿™å°†åˆ›å»ºä¸€ä¸ªæ–°çš„ä»¤ç‰Œï¼Œæ‚¨å¯ä»¥ç”¨å®ƒæ¥æˆæƒæ‚¨çš„ API è°ƒç”¨ï¼Œå› æ­¤ `å¤åˆ¶è¯¥ä»¤ç‰Œ`ã€‚è¯·å°†å…¶ä¿å­˜åœ¨æŸä¸ªæ–‡ä»¶ä¸­ï¼Œå› ä¸ºæ‚¨å¾ˆå¿«å°±ä¼šç”¨åˆ°å®ƒï¼š![](/authentication-copy-token.png)
 1. ç„¶ååœ¨å³ä¸Šè§’ `ç‚¹å‡»å¤é€‰æ¡†æŒ‰é’®` ä»¥ä¿å­˜æ‚¨çš„è´¦æˆ·æ›´æ”¹ï¼š![](/authentication-save-account-changes.png)

è¿™æ ·å°±å¯ä»¥äº†ã€‚ç°åœ¨æˆ‘ä»¬å°†ä½¿ç”¨è¯¥ä»¤ç‰Œæ¥éªŒè¯æˆ‘ä»¬çš„ API è°ƒç”¨ã€‚

### ç”Ÿæˆä¸€å¼ å›¾ç‰‡

ç°åœ¨æ‚¨æœ‰äº†æ‚¨çš„[èº«ä»½éªŒè¯ä»¤ç‰Œ](#è·å–èº«ä»½éªŒè¯ä»¤ç‰Œ)ï¼Œæ‚¨å¯ä»¥ç”Ÿæˆæ‚¨çš„ç¬¬ä¸€å¼ å›¾ç‰‡ã€‚

é€‰æ‹©æ‚¨æœ€å–œæ¬¢çš„è¯­è¨€ï¼Œçœ‹çœ‹å¦‚ä½•æ“ä½œï¼š


```js filename="midjourney-api.js" copy
// ä½¿ç”¨ fetch â€” éœ€è¦ Node.js 18 æˆ–æ›´é«˜ç‰ˆæœ¬

const data = {
    prompt: "hello world --ar 21:9 --style raw"
};

fetch('https://demo.imagineapi.dev/items/images/', {
    method: 'POST',
    headers: {
        'Authorization': 'Bearer u667iLDO2Xfu0-qpv_nu82EeeDtYGlsf', // <<<< TODO: è®°å¾—æ›´æ”¹è¿™ä¸ª
        'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
})
.then(response => response.json())
.then(data => console.log(data))
.catch(error => console.error('é”™è¯¯:', error));
```

æˆ‘ä»¬è¿è¡Œå®ƒï¼ˆéœ€è¦ Node.js 18 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰ï¼š

```shell
â¯ node --version
v18.14.0

â¯ node midjourney-api.js
```

è¾“å‡ºå°†å¦‚ä¸‹æ‰€ç¤ºï¼š

```js
{
  data: {
    id: "cbf8b8b3-1d35-4a22-9fa4-5c5c5c5682c9",
    prompt: "hello world --ar 21:9 --style raw",
    results: null,
    user_created: "4df804f1-e32e-4e1c-be58-6acbe48cce98",
    date_created: "2023-08-29T22:50:24.993Z",
    status: "pending",
    progress: null,
    url: null,
    error: null,
    upscaled_urls: null,
    upscaled: []
  }
}
```

ç°åœ¨ï¼Œæ‚¨çš„æç¤ºå°†è¢«å‘é€åˆ° Midjourneyã€‚

éœ€è¦æ³¨æ„çš„å‡ ä¸ªé‡è¦ç»†èŠ‚ï¼š

- å›¾åƒ `id` å°†ä¿æŒä¸å˜ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥è·å–å›¾åƒçš„æ•°æ®å’ŒçŠ¶æ€
- `çŠ¶æ€` é»˜è®¤ä¸º `pending`ï¼Œè¿™æ˜¯é¦–æ¬¡åˆ›å»ºå›¾åƒç”Ÿæˆæ—¶çš„é»˜è®¤çŠ¶æ€
- å½“ç”Ÿæˆå®Œæˆæ—¶ï¼ˆ`status` å°†å˜ä¸º `completed`ï¼‰ï¼Œ`upscaled_urls` å°†åŒ…å« 4 ä¸ªå•ç‹¬çš„å›¾åƒ URLï¼Œè€Œ `url` å°†æœ‰ä¸€ä¸ªåŒ…å«æ‰€æœ‰å››ä¸ªå›¾åƒçš„ç½‘æ ¼å›¾åƒ

ç»§ç»­å¾€ä¸‹çœ‹ï¼Œäº†è§£å¦‚ä½•[è·å–ç”Ÿæˆçš„å›¾åƒ](#è·å–ç”Ÿæˆçš„å›¾åƒ)ã€‚

### è·å–ç”Ÿæˆçš„å›¾åƒ

åœ¨æ¼”ç¤ºæœåŠ¡å™¨ä¸­ç”Ÿæˆå›¾åƒæœ€å¤šéœ€è¦ 30 ç§’ã€‚æˆ‘ä»¬ä½¿ç”¨äº†å¯ç”¨äº† **turbo æ¨¡å¼** çš„ Midjourney è´¦æˆ·ï¼Œæ‰€ä»¥é€šå¸¸éå¸¸å¿«ã€‚

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œä»¥è·å–æˆ‘ä»¬åœ¨[ä¸Šä¸€æ­¥](#ç”Ÿæˆä¸€å¼ å›¾ç‰‡)ä¸­åˆ›å»ºçš„å›¾åƒã€‚

```js filename="get-image.js" copy

const imageId = 'cbf8b8b3-1d35-4a22-9fa4-5c5c5c5682c9'; // <<< TODO: è®°å¾—æ›´æ”¹è¿™ä¸ª

fetch(`https://demo.imagineapi.dev/items/images/${imageId}`, {
    method: 'GET',
    headers: {
        'Authorization': 'Bearer u667iLDO2Xfu0-qpv_nu82EeeDtYGlsf', // <<<< TODO: è®°å¾—æ›´æ”¹è¿™ä¸ª
        'Content-Type': 'application/json'
    }
})
.then(response => response.json())
.then(data => console.log(data))
.catch(error => console.error('é”™è¯¯:', error));
```

ç„¶åæˆ‘ä»¬è¿è¡Œå®ƒï¼ˆéœ€è¦ Node.js 18 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰ï¼š

```sh
â¯ node --version
v18.14.0

â¯ node get-image.js
```

å¦‚æœå›¾åƒå®Œæˆç”Ÿæˆï¼Œè¿™æ˜¯æˆ‘ä»¬å¾—åˆ°çš„ç»“æœï¼š

```js
{
  data: {
    id: 'cbf8b8b3-1d35-4a22-9fa4-5c5c5c5682c9',
    prompt: 'hello world --ar 21:9 --style raw',
    results: '88071412-a748-4a2a-81c2-e91106082599',
    user_created: '4df804f1-e32e-4e1c-be58-6acbe48cce98',
    date_created: '2023-08-29T22:50:24.993Z',
    status: 'completed',
    progress: null,
    url: 'https://demo.imagineapi.dev/assets/88071412-a748-4a2a-81c2-e91106082599/88071412-a748-4a2a-81c2-e91106082599.png',
    error: null,
    upscaled_urls: [
      'https://demo.imagineapi.dev/assets/33c64de8-de37-463d-af53-f3aaea16588f/33c64de8-de37-463d-af53-f3aaea16588f.png',
      'https://demo.imagineapi.dev/assets/c0f78281-2f78-4c67-8516-5895ce330085/c0f78281-2f78-4c67-8516-5895ce330085.png',
      'https://demo.imagineapi.dev/assets/d9193d04-8e4d-4049-a2fd-fb9594b7fe8b/d9193d04-8e4d-4049-a2fd-fb9594b7fe8b.png',
      'https://demo.imagineapi.dev/assets/88db33d1-9ca4-44dd-ba89-b4cf3c1e95be/88db33d1-9ca4-44dd-ba89-b4cf3c1e95be.png'
    ],
    upscaled: [
      '33c64de8-de37-463d-af53-f3aaea16588f',
      '88db33d1-9ca4-44dd-ba89-b4cf3c1e95be',
      'c0f78281-2f78-4c67-8516-5895ce330085',
      'd9193d04-8e4d-4049-a2fd-fb9594b7fe8b'
    ]
  }
}
```

è¿™æ ·å°±å®Œæˆäº†ï¼æ‚¨ç°åœ¨å¯ä»¥ä½¿ç”¨å›¾åƒ ID è®¿é—®æ‚¨çš„å›¾ç‰‡ã€‚

</Steps>